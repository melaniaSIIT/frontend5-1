<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/png" href="../assets/images/title-logo.png"/>
  <title>Add new movie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../assets/css/reset.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/addMovie.css" type="text/css">
  <style>@import url('https://fonts.googleapis.com/css?family=Open+Sans');</style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="../models/MovieList.js"></script>

  <script type="text/javascript">
  	$(document).on('click', '#addMovieButton', function(e) {
  		e.preventDefault();

	    var movie = {
		    Title: $('#movieTitle').val(),
		    Year: $('#movieYear').val(),
		    imdbRating: $('#imdbRating').val(),
		    Genre: $('#movieGenre').val(),
		    Poster: $('#moviePoster').val()
		}
		function addNewMovie(movie) {
		  	$.ajax({ 
			    url: "https://ancient-caverns-16784.herokuapp.com/movies",
			    method: "POST",
			    headers: {
			    	"X-Auth-Token": "fKw_-Nf2vGAhTCUfmJt4fiNaT0xU4SLi"
			    },
			    data: movie,
			    success: manageData
		    });
  		};

  		addNewMovie(movie);
	});

	function manageData(data) {
		console.log("movie added", data);
	} 
  </script>
</head>
<body>
	<div class="topnav" id="topnav">
	    <a class="active" id="home" href="#home">Home</a>
	    <a class="active" id="register">Register</a>
	    <a class="active" id="login">Login</a>
	    <div class="search-container">
	      <input id="search" type="text" placeholder="Search.." name="search">
	      <button id="searchButton" type="submit"><i class="fa fa-search"></i></button>
    	</div>
    <div id='greeter'></div>
  </div>

  <img id="title-logo" src="../assets/images/title-logo.png" alt="Movies-heading-logo">
  <button class='admin-button' id='add-movies'>Add movie</button>

  	<div id="addMoreMovies">
  		<p>Add more movies here</p>
  	</div>
    <form id="addMovie">
    	<label>Movie Title:</label></br>
    	<input type="text" name="title" id="movieTitle" size="30"></br>
		<label>Year:</label></br>
		<input type="text" name="year" id="movieYear"></br>
		<label>IMDB Rating:</label></br>
		<input type="text" name="imdbRating" id="imdbRating"></br>
		<label>Genre:</label></br>
		<input type="text" name="genre" id="movieGenre"></br>
		<label>Poster:</label></br>
		<textarea name="poster" id="moviePoster"cols="40" rows="5" placeholder="Place the link to the poster here..."></textarea></br>
		<button type="submit" id="addMovieButton">Add movie</button>
  </form>
</body>
</html>